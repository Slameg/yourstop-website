<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>YourStop ‚Äî Minecraft —Å–µ—Ä–≤–µ—Ä</title>
  <meta name="description" content="YourStop ‚Äî –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π Minecraft-—Å–µ—Ä–≤–µ—Ä. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è: yourstop.online"/>

  <!--
    Single-file portal:
    - –ù–∞—Å—Ç—Ä–æ–π–∫–∏: –≤–Ω–∏–∑—É JS-–∫–æ–Ω—Ñ–∏–≥–∞ (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ SERVER, DISCORD_INVITE, DONATE_LINK, WALLET_ADDRESS)
    - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ –±–µ—Ä—ë—Ç—Å—è –∏–∑ –ø—É–±–ª–∏—á–Ω–æ–≥–æ API api.mcsrvstat.us (–≤ –±—Ä–∞—É–∑–µ—Ä–µ).
    - –ï—Å–ª–∏ –Ω—É–∂–µ–Ω 100% –±–µ–∑–∑–∞–≤–∏—Å–∏–º—ã–π —Å—Ç–∞—Ç—É—Å ‚Äî –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–∫—Å–∏/pinger (–º–æ–≥—É –ø–æ–º–æ—á—å –æ—Ç–¥–µ–ª—å–Ω–æ).
  -->

  <style>
    :root{
      --bg-1:#050816; --bg-2:#07142b;
      --card: rgba(11,18,32,0.86);
      --accent:#60a5fa; --accent2:#2dd4bf;
      --muted:#9fb2c9; --glass: rgba(255,255,255,0.03);
      --glass-2: rgba(255,255,255,0.04);
      --text: #e6eef8;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;color:var(--text);background:linear-gradient(180deg,var(--bg-1),var(--bg-2));-webkit-font-smoothing:antialiased}
    canvas.bg{position:fixed;inset:0;z-index:-2}
    .nebula{position:fixed;inset:0;background:radial-gradient(circle at 10% 30%, rgba(96,165,250,0.08), transparent 8%), radial-gradient(circle at 90% 70%, rgba(45,212,191,0.06), transparent 10%);z-index:-1;filter:blur(18px);pointer-events:none}
    .wrap{max-width:1100px;margin:28px auto;padding:20px}
    header.top{display:flex;align-items:center;gap:16px}
    .logo{width:72px;height:72px;border-radius:16px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;color:#02101f;font-weight:900;font-size:26px;box-shadow:0 6px 28px rgba(96,165,250,0.22)}
    h1{margin:0;font-size:24px}
    .lead{margin:6px 0;color:var(--muted)}
    nav.tabs{display:flex;gap:8px;margin-top:18px;flex-wrap:wrap}
    .tab{padding:10px 14px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.03);cursor:pointer;color:var(--text);font-weight:700;transition:all .18s}
    .tab.active{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#022033;box-shadow:0 8px 24px rgba(96,165,250,0.12)}
    .content{display:grid;grid-template-columns:1fr 340px;gap:20px;margin-top:18px}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 12px 40px rgba(2,6,23,0.6);backdrop-filter: blur(6px)}
    /* Status area */
    .status-head{display:flex;gap:12px;align-items:center}
    .status-badge{width:92px;height:92px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:16px}
    .online{background:linear-gradient(90deg,#34d399,var(--accent));color:#052023}
    .offline{background:#374151;color:#fff}
    .motd{font-size:18px;margin-bottom:6px}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .btn{padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:800;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#022033}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(96,165,250,0.12)}
    .meta{display:flex;gap:14px;margin-top:12px;flex-wrap:wrap}
    .meta .block{min-width:120px}
    .players-list{margin-top:10px;display:flex;flex-direction:column;gap:8px}
    .player{display:flex;align-items:center;gap:10px;padding:8px;border-radius:8px;background:var(--glass-2);font-size:14px}
    /* Right column */
    .side .links{padding-left:14px}
    .ip-big{font-weight:900;font-size:20px;margin-top:8px}
    .donate-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
    .donate-card{padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));text-align:center}
    .rules{line-height:1.5;color:var(--muted);padding-top:6px}
    footer{margin-top:20px;text-align:center;color:var(--muted);font-size:13px}
    /* Tabs content containers */
    .pane{display:none}
    .pane.active{display:block}
    /* animations */
    .fade-in{animation:fadeIn .5s ease both}
    @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
    /* small screens */
    @media(max-width:920px){.content{grid-template-columns:1fr;}.logo{width:56px;height:56px;border-radius:12px}}
  </style>
</head>
<body>
  <canvas class="bg"></canvas>
  <div class="nebula"></div>

  <div class="wrap">
    <header class="top">
      <div class="logo">YS</div>
      <div>
        <h1>YourStop</h1>
        <div class="lead">–õ—É—á—à–∏–π —Å–µ—Ä–≤–µ—Ä –≤—ã–∂–∏–≤–∞–Ω–∏—è ‚Äî –ø–æ–¥–∫–ª—é—á–∞–π—Å—è: <strong id="ip-display">yourstop.online</strong></div>
      </div>
    </header>

    <nav class="tabs" aria-label="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é">
      <button class="tab active" data-target="home">–°—Ç–∞—Ç—É—Å</button>
      <button class="tab" data-target="rules">–ü—Ä–∞–≤–∏–ª–∞</button>
      <button class="tab" data-target="donate">–î–æ–Ω–∞—Ç</button>
      <button class="tab" data-target="discord">Discord</button>
      <button class="tab" data-target="about">–û —Å–µ—Ä–≤–µ—Ä–µ</button>
    </nav>

    <div class="content">
      <!-- MAIN COLUMN -->
      <main>
        <section id="home" class="pane active card fade-in">
          <div class="status-head">
            <div id="status-badge" class="status-badge">‚Äî</div>
            <div>
              <div id="motd" class="motd">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–∞...</div>
              <div id="ver" style="color:var(--muted)">–í–µ—Ä—Å–∏—è: ‚Äî</div>
            </div>
          </div>

          <div class="controls">
            <button id="copy-ip" class="btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å IP</button>
            <button id="join" class="btn ghost">–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</button>
            <button id="refresh" class="btn ghost" title="–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å">–û–±–Ω–æ–≤–∏—Ç—å</button>
          </div>

          <div class="meta">
            <div class="block">
              <div style="color:var(--muted);font-weight:700">–ò–≥—Ä–æ–∫–∏</div>
              <div id="players" style="margin-top:8px;color:var(--text)">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
              <div id="players-list" class="players-list" style="display:none"></div>
            </div>

            <div class="block">
              <div style="color:var(--muted);font-weight:700">Ping</div>
              <div id="ping" style="margin-top:8px;color:var(--text)">‚Äî ms</div>
              <div id="uptime" style="margin-top:8px;color:var(--muted);font-size:13px"></div>
            </div>
          </div>
        </section>

        <section id="rules" class="pane card">
          <h3>–ü—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–≤–µ—Ä–∞</h3>
          <div class="rules">
            <ol>
              <li>–ó–∞–ø—Ä–µ—â—ë–Ω griefing ‚Äî –Ω–µ –ª–æ–º–∞–π –∏ –Ω–µ –∫—Ä–∞–¥–∏ —á—É–∂–∏–µ –ø–æ—Å—Ç—Ä–æ–π–∫–∏.</li>
              <li>–ë–µ–∑ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–π –∏ –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ü–∏–∏ ‚Äî —É–≤–∞–∂–∞–π –∏–≥—Ä–æ–∫–æ–≤ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª.</li>
              <li>–ó–∞–ø—Ä–µ—â–µ–Ω–∞ —Ä–µ–∫–ª–∞–º–∞ –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∞–¥–º–∏–Ω–æ–≤.</li>
              <li>–°–ª–µ–¥—É–π—Ç–µ —Ä–µ—à–µ–Ω–∏—è–º –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ ‚Äî –∏—Ö —É–∫–∞–∑–∞–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã.</li>
              <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–∏—Ç–æ–≤/–º–æ–¥–æ–≤ –¥–∞—é—â–∏—Ö —è–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ ‚Äî –±–∞–Ω.</li>
            </ol>
            <p style="margin-top:10px;color:var(--muted)">–ü–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ –∏–ª–∏ –≤ Discord.</p>
          </div>
        </section>

        <section id="donate" class="pane card">
          <h3>–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Å–µ—Ä–≤–µ—Ä</h3>
          <p style="color:var(--muted)">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç –¥–µ—Ä–∂–∞—Ç—å —Å–µ—Ä–≤–µ—Ä –æ–Ω–ª–∞–π–Ω –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç.</p>

          <div class="donate-grid">
            <div class="donate-card">
              <div style="font-weight:800">–ö–∞—Ä—Ç–∞ / Qiwi</div>
              <div style="margin-top:8px" id="wallet-addr">–ù–æ–º–µ—Ä: <span id="wallet-val">+7 000 000 00 00</span></div>
              <div style="margin-top:10px">
                <button class="btn" id="copy-wallet">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
              </div>
            </div>

            <div class="donate-card">
              <div style="font-weight:800">–û–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç–∞</div>
              <a id="donate-link" class="btn" href="#" target="_blank" style="display:inline-block;margin-top:12px">–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–æ–Ω–∞—Ç–∞</a>
            </div>
          </div>

          <div style="margin-top:12px;color:var(--muted)">–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã ‚Äî –Ω–∞–ø–∏—à–∏ –≤ Discord –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ –≤—ã–¥–∞—á–∏ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π.</div>
        </section>

        <section id="discord" class="pane card">
          <h3>Discord</h3>
          <p style="color:var(--muted)">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ –Ω–∞—à–µ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π, –ø–æ–º–æ—â–∏ –∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π.</p>
          <div style="margin-top:12px">
            <!-- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤–∏–¥–∂–µ—Ç –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ iframe –æ—Ç discord (—Ç—Ä–µ–±—É–µ—Ç SERVER ID). –ó–¥–µ—Å—å ‚Äî –∫–Ω–æ–ø–∫–∞ –∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ -->
            <a id="discord-invite" class="btn" target="_blank" href="#">–û—Ç–∫—Ä—ã—Ç—å Discord</a>
          </div>

          <div style="margin-top:14px;color:var(--muted)">–ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å ID —Å–µ—Ä–≤–µ—Ä–∞ Discord, –∑–∞–º–µ–Ω–∏—Ç–µ —Å—Å—ã–ª–∫—É –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥–µ –¥–ª—è –∞–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.</div>
        </section>

        <section id="about" class="pane card">
          <h3>–û —Å–µ—Ä–≤–µ—Ä–µ</h3>
          <p style="color:var(--muted)">YourStop ‚Äî –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π survival —Å–µ—Ä–≤–µ—Ä. –ú—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã—Ö –∏ –ø–∏—Ä–∞—Ç–æ–≤, —á–µ—Å—Ç–Ω—É—é –∏–≥—Ä—É –∏ –∞–∫—Ç–∏–≤–Ω–æ–µ –∫–æ–º—å—é–Ω–∏—Ç–∏.</p>
          <ul style="margin-top:8px;color:var(--muted)">
            <li>–°—Ç–∞–±–∏–ª—å–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</li>
            <li>–ß–∞—Å—Ç—ã–µ —ç–≤–µ–Ω—Ç—ã –∏ –º–∏–Ω–∏-–∏–≤–µ–Ω—Ç—ã</li>
            <li>–°–∏—Å—Ç–µ–º–∞ —Ä–∞–Ω–≥–æ–≤ –∏ –º–∞–≥–∞–∑–∏–Ω (–¥–æ–Ω–∞—Ç)</li>
          </ul>
        </section>
      </main>

      <!-- SIDE COLUMN -->
      <aside class="side card">
        <h4>–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</h4>
        <div style="color:var(--muted)">IP —Å–µ—Ä–≤–µ—Ä–∞:</div>
        <div class="ip-big" id="ip-big">yourstop.online</div>
        <div style="margin-top:10px">
          <button class="btn" id="btn-copy-ip-side">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å IP</button>
        </div>

        <div style="margin-top:18px">
          <h4>–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏</h4>
          <ul class="links" style="margin-top:8px">
            <li><a href="https://yourstop.ru" target="_blank">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç</a></li>
            <li><a id="discord-link" href="#" target="_blank">Discord</a></li>
          </ul>
        </div>

        <div style="margin-top:14px">
          <h4>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞</h4>
          <div style="color:var(--muted);margin-top:6px">–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ <span id="interval-sec">25</span>s</div>
        </div>
      </aside>
    </div>

    <footer>¬© 2025 YourStop ‚Äî –≤—Å–µ –ø—Ä–∞–≤–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã</footer>
  </div>

  <script>
    /* ===================== CONFIG =====================
       –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∏–∂–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:
         - SERVER: IP/–¥–æ–º–µ–Ω Minecraft —Å–µ—Ä–≤–µ—Ä–∞
         - DISCORD_INVITE: —Å—Å—ã–ª–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è Discord (https://discord.gg/xxx)
         - DONATE_LINK: —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã/–¥–æ–Ω–∞—Ç–∞
         - WALLET_ADDRESS: –Ω–æ–º–µ—Ä/–∞–¥—Ä–µ—Å –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
    =================================================== */
    const SERVER = 'yourstop.online';
    const DISCORD_INVITE = 'https://discord.gg/your-invite'; // –∑–∞–º–µ–Ω–∏—Ç–µ
    const DONATE_LINK = 'https://yourstop.ru/donate'; // –∑–∞–º–µ–Ω–∏—Ç–µ
    const WALLET_ADDRESS = '+7 000 000 00 00'; // –∑–∞–º–µ–Ω–∏—Ç–µ
    const CHECK_INTERVAL = 25; // –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    /* =================== END CONFIG =================== */

    // DOM refs
    const ipDisplay = document.getElementById('ip-display');
    const ipBig = document.getElementById('ip-big');
    const copyIpBtns = [document.getElementById('copy-ip'), document.getElementById('btn-copy-ip-side')];
    const statusBadge = document.getElementById('status-badge');
    const motdEl = document.getElementById('motd');
    const verEl = document.getElementById('ver');
    const playersEl = document.getElementById('players');
    const playersListEl = document.getElementById('players-list');
    const pingEl = document.getElementById('ping');
    const refreshBtn = document.getElementById('refresh');
    const intervalSecEl = document.getElementById('interval-sec');
    const discordInviteEl = document.getElementById('discord-invite');
    const discordLinkEl = document.getElementById('discord-link');
    const donateLinkEl = document.getElementById('donate-link');
    const walletValEl = document.getElementById('wallet-val');
    const copyWalletBtn = document.getElementById('copy-wallet');

    ipDisplay.textContent = ipBig.textContent = SERVER;
    intervalSecEl.textContent = CHECK_INTERVAL;
    discordInviteEl.href = DISCORD_INVITE;
    discordLinkEl.href = DISCORD_INVITE;
    donateLinkEl.href = DONATE_LINK;
    walletValEl.textContent = WALLET_ADDRESS;

    // copy handlers
    function copyText(t){
      navigator.clipboard?.writeText(t).then(()=>{
        showToast('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: ' + t);
      }).catch(()=>{
        prompt('–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é:', t);
      });
    }
    copyIpBtns.forEach(b=>b.addEventListener('click', ()=>copyText(SERVER)));
    document.getElementById('copy-ip').addEventListener('dblclick', ()=>{ // dblclick => copy and show players?
      copyText(SERVER);
    });
    copyWalletBtn.addEventListener('click', ()=>copyText(WALLET_ADDRESS));
    document.getElementById('join').addEventListener('click', ()=>alert('–û—Ç–∫—Ä–æ–π Minecraft ‚Üí Multiplayer ‚Üí Add Server ‚Üí –≤–≤–µ–¥–∏ "'+SERVER+'" –∏ –Ω–∞–∂–º–∏ Join.'));

    refreshBtn.addEventListener('click', ()=>{ fetchStatus(true); showToast('–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...'); });

    const SIMPLE_API = `https://api.mcsrvstat.us/simple/${SERVER}`; // –ø—Ä–æ–≤–µ—Ä–∫–∞ 200/404
    const JSON_API = `https://api.mcsrvstat.us/3/${SERVER}`; // –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

    let lastStatus = null;
    async function fetchStatus(force=false){
      try{
        const r = await fetch(SIMPLE_API, {cache:'no-store'});
        if(r.status===200){
          setOnline();
          await fetchDetails();
        } else if(r.status===404){
          setOffline();
        } else {
          setUnknown();
        }
      }catch(e){
        console.error('Status fetch error', e);
        setUnknown();
      }
    }
    function setOnline(){
      if(lastStatus!=='online'){ flashStatusChange(); lastStatus='online'; }
      statusBadge.className = 'status-badge online';
      statusBadge.textContent = 'ONLINE';
    }
    function setOffline(){
      if(lastStatus!=='offline'){ flashStatusChange(); lastStatus='offline'; }
      statusBadge.className = 'status-badge offline';
      statusBadge.textContent = 'OFFLINE';
      motdEl.textContent = '–°–µ—Ä–≤–µ—Ä –æ—Ñ–ª–∞–π–Ω';
      verEl.textContent = '–í–µ—Ä—Å–∏—è: ‚Äî';
      playersEl.textContent = '0 –æ–Ω–ª–∞–π–Ω';
      playersListEl.style.display='none';
      pingEl.textContent = '‚Äî';
      document.title = 'YourStop ‚Äî OFFLINE';
    }
    function setUnknown(){
      statusBadge.className = 'status-badge offline';
      statusBadge.textContent = '–ù–ï–ò–ó–í–ï–°–¢–ù–û';
      motdEl.textContent = '–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç–∞—Ç—É—Å';
    }

    async function fetchDetails(){
      try{
        const r = await fetch(JSON_API, {cache:'no-store'});
        if(!r.ok) return;
        const data = await r.json();
        if(!data.online){ setOffline(); return; }
        const motd = data.motd?.clean?.join(' ') || data.hostname || 'YourStop';
        motdEl.textContent = motd;
        verEl.textContent = '–í–µ—Ä—Å–∏—è: ' + (data.version || '‚Äî');
        // players
        if(data.players?.list?.length){
          playersEl.textContent = (data.players?.online || data.players.list.length) + ' –æ–Ω–ª–∞–π–Ω';
          playersListEl.innerHTML = data.players.list.slice(0, 20).map(p=>`<div class="player">üîπ ${escapeHtml(p)}</div>`).join('');
          playersListEl.style.display = 'flex';
        } else {
          playersEl.textContent = (data.players?.online || 0) + ' –æ–Ω–ª–∞–π–Ω';
          playersListEl.style.display = 'none';
        }
        // ping
        pingEl.textContent = (data.debug?.ping ? data.debug.ping + ' ms' : (data.latency ? data.latency + ' ms' : '‚Äî'));
        document.title = `YourStop ‚Äî ${data.players?.online || 0} –æ–Ω–ª–∞–π–Ω`;
      }catch(e){
        console.error('Details fetch error', e);
      }
    }

    // helper
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' })[c]); }

    // small visual pulse for status change
    function flashStatusChange(){
      statusBadge.animate([{transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}],{duration:420});
    }

    // initial + interval
    fetchStatus();
    setInterval(fetchStatus, CHECK_INTERVAL*1000);

    // Tabs navigation
    document.querySelectorAll('.tab').forEach(t=>{
      t.addEventListener('click', ()=> {
        document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
        t.classList.add('active');
        const target = t.getAttribute('data-target');
        document.querySelectorAll('.pane').forEach(p=>{
          p.classList.remove('active');
        });
        const pane = document.getElementById(target);
        if(pane){ pane.classList.add('active'); window.scrollTo({top:0,behavior:'smooth'}); }
      });
    });

    // small toast
    let toastTimer = null;
    function showToast(text){
      let el = document.getElementById('___toast');
      if(!el){
        el = document.createElement('div');
        el.id='___toast';
        el.style.position='fixed';
        el.style.right='20px';
        el.style.bottom='20px';
        el.style.padding='10px 14px';
        el.style.borderRadius='10px';
        el.style.background='linear-gradient(90deg,var(--accent),var(--accent2))';
        el.style.color='#022033';
        el.style.fontWeight='800';
        el.style.boxShadow='0 10px 30px rgba(0,0,0,0.4)';
        document.body.appendChild(el);
      }
      el.textContent = text;
      el.style.opacity = '1';
      if(toastTimer) clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>{ el.style.opacity='0'; }, 2000);
    }

    /* ===================== Canvas particles & neon backdrop ===================== */
    (function(){
      const canvas = document.querySelector('canvas.bg');
      const ctx = canvas.getContext('2d');
      let w=innerWidth, h=innerHeight;
      canvas.width = w; canvas.height = h;
      const particles = [];
      const PARTICLE_COUNT = Math.min(120, Math.floor((w*h)/15000));
      let mx = w/2, my = h/2;

      function onResize(){ w=innerWidth; h=innerHeight; canvas.width=w; canvas.height=h; resetParticles(); }
      addEventListener('resize', onResize);
      addEventListener('mousemove', e=>{ mx=e.clientX; my=e.clientY; });

      function rand(min,max){ return Math.random()*(max-min)+min; }
      class P {
        constructor(){
          this.reset();
        }
        reset(){
          this.x = rand(0,w); this.y = rand(0,h);
          this.vx = rand(-0.25,0.25); this.vy = rand(-0.25,0.25);
          this.r = rand(0.6,2.2);
          this.h = rand(170,240);
          this.alpha = rand(0.12,0.9);
        }
        step(){
          this.x += this.vx; this.y += this.vy;
          if(this.x< -50 || this.x > w+50 || this.y < -50 || this.y > h+50) this.reset();
          // attraction to cursor
          const dx = this.x - mx, dy = this.y - my;
          const d = Math.sqrt(dx*dx+dy*dy);
          if(d < 120){
            this.x += (mx - this.x)*0.02;
            this.y += (my - this.y)*0.02;
          }
        }
        draw(){
          ctx.beginPath();
          const g = ctx.createRadialGradient(this.x,this.y,this.r*0.2,this.x,this.y,this.r*6);
          g.addColorStop(0, `hsla(${this.h},90%,70%,${this.alpha})`);
          g.addColorStop(0.4, `hsla(${this.h},85%,60%,${this.alpha*0.35})`);
          g.addColorStop(1, `rgba(3,6,10,0)`);
          ctx.fillStyle = g;
          ctx.arc(this.x,this.y,this.r*6,0,Math.PI*2);
          ctx.fill();
        }
      }

      function resetParticles(){
        particles.length = 0;
        for(let i=0;i<PARTICLE_COUNT;i++) particles.push(new P());
      }
      resetParticles();

      function loop(){
        ctx.clearRect(0,0,w,h);
        // subtle vignette
        ctx.fillStyle = 'rgba(3,6,10,0.18)';
        ctx.fillRect(0,0,w,h);
        for(const p of particles){ p.step(); p.draw(); }
        requestAnimationFrame(loop);
      }
      loop();
    })();

    /* Accessibility note: allow keyboard navigation between tabs */
    document.addEventListener('keydown', e=>{
      if(e.key === 'ArrowLeft' || e.key === 'ArrowRight'){
        const tabs = Array.from(document.querySelectorAll('.tab'));
        const idx = tabs.findIndex(t=>t.classList.contains('active'));
        if(idx >= 0){
          const next = e.key === 'ArrowRight' ? (idx+1)%tabs.length : (idx-1+tabs.length)%tabs.length;
          tabs[next].click(); tabs[next].focus();
        }
      }
    });

    // Metrics: if needed, we can show console info when pressing "I"
    document.addEventListener('keydown', e=>{
      if(e.key.toLowerCase()==='i' && e.ctrlKey){
        console.info('YourStop debug: SERVER=', SERVER);
        showToast('Debug –≤—ã–≤–µ–¥–µ–Ω –≤ –∫–æ–Ω—Å–æ–ª—å');
      }
    });

  </script>
</body>
</html>
